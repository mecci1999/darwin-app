# Darwin App - å¾®æœåŠ¡åº”ç”¨

åŸºäº Node-Universe æ¡†æ¶æ„å»ºçš„ç°ä»£åŒ–å¾®æœåŠ¡æ¶æ„åº”ç”¨ï¼Œä½¿ç”¨ TypeScript å¼€å‘ã€‚Node-Universe æ˜¯åŸºäº Moleculer å¾®æœåŠ¡æ¡†æ¶çš„äºŒæ¬¡å¼€å‘ç‰ˆæœ¬ï¼Œæä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½å’Œæ›´å¥½çš„å¼€å‘ä½“éªŒã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„

Darwin App é‡‡ç”¨å¾®æœåŠ¡æ¶æ„æ¨¡å¼ï¼Œå°†åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„æœåŠ¡å•å…ƒï¼Œæ¯ä¸ªæœåŠ¡è´Ÿè´£ç‰¹å®šçš„ä¸šåŠ¡åŠŸèƒ½ã€‚æœåŠ¡é—´é€šè¿‡ Kafka æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œå¼‚æ­¥é€šä¿¡ï¼Œä½¿ç”¨ Redis ä½œä¸ºåˆ†å¸ƒå¼ç¼“å­˜ï¼ŒMySQL ä½œä¸ºä¸»æ•°æ®åº“ï¼ŒInfluxDB ä½œä¸ºæ—¶åºæ•°æ®åº“ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client Apps   â”‚    â”‚   Web Browser   â”‚    â”‚  Mobile Apps    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      API Gateway        â”‚
                    â”‚    (Load Balancer)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                        â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Service â”‚    â”‚   User Service        â”‚    â”‚Metrics Serviceâ”‚
â”‚   (è®¤è¯æˆæƒ)   â”‚    â”‚   (ç”¨æˆ·ç®¡ç†)            â”‚    â”‚   (æŒ‡æ ‡ç›‘æ§)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Subscription Service   â”‚
                    â”‚     (è®¢é˜…ç®¡ç†)            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                        â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚     MySQL     â”‚    â”‚       Redis           â”‚    â”‚    Kafka      â”‚
â”‚   (ä¸»æ•°æ®åº“)    â”‚    â”‚    (åˆ†å¸ƒå¼ç¼“å­˜)        â”‚    â”‚  (æ¶ˆæ¯é˜Ÿåˆ—)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

#### 1. **API Gateway (ç½‘å…³æœåŠ¡)**
- **èŒè´£**: ç»Ÿä¸€å…¥å£ã€è·¯ç”±åˆ†å‘ã€è´Ÿè½½å‡è¡¡ã€é™æµã€CORSå¤„ç†
- **æŠ€æœ¯æ ˆ**: Node-Universe Gateway, WebSocketæ”¯æŒ
- **ç‰¹æ€§**: è¯·æ±‚è½¬å‘ã€ç›‘æ§æŒ‡æ ‡ã€é”™è¯¯å¤„ç†ã€IPé»‘åå•

#### 2. **Auth Service (è®¤è¯æœåŠ¡)**
- **èŒè´£**: ç”¨æˆ·è®¤è¯ã€JWTä»¤ç‰Œç®¡ç†ã€æƒé™éªŒè¯ã€å¯†ç åŠ å¯†
- **æŠ€æœ¯æ ˆ**: JWT, bcrypt, Redisç¼“å­˜
- **ç‰¹æ€§**: ä»¤ç‰Œåˆ·æ–°ã€ç™»å½•çŠ¶æ€ç®¡ç†ã€å®‰å…¨éªŒè¯

#### 3. **User Service (ç”¨æˆ·æœåŠ¡)**
- **èŒè´£**: ç”¨æˆ·ä¿¡æ¯ç®¡ç†ã€ç”¨æˆ·èµ„æ–™ã€ç»Ÿè®¡æ•°æ®æ”¶é›†
- **æŠ€æœ¯æ ˆ**: MySQL, Redisç¼“å­˜, äº‹ä»¶é©±åŠ¨
- **ç‰¹æ€§**: ç”¨æˆ·CRUDã€ç¼“å­˜ç­–ç•¥ã€äº‹ä»¶å‘å¸ƒ

#### 4. **Metrics Service (æŒ‡æ ‡æœåŠ¡)**
- **èŒè´£**: æ•°æ®æ”¶é›†ã€æŒ‡æ ‡è®¡ç®—ã€é…é¢ç®¡ç†ã€å®æ—¶ç›‘æ§
- **æŠ€æœ¯æ ˆ**: InfluxDB, Kafka, Redis, æ•°æ®èšåˆ
- **ç‰¹æ€§**: æ—¶åºæ•°æ®å­˜å‚¨ã€å®æ—¶å¤„ç†ã€é…é¢æ£€æŸ¥

#### 5. **Subscription Service (è®¢é˜…æœåŠ¡)**
- **èŒè´£**: è®¢é˜…ç®¡ç†ã€æ”¯ä»˜å¤„ç†ã€è®¡è´¹ç³»ç»Ÿã€é€šçŸ¥æœåŠ¡
- **æŠ€æœ¯æ ˆ**: æ”¯ä»˜ç½‘å…³é›†æˆã€è®¢é˜…è®¡åˆ’ç®¡ç†
- **ç‰¹æ€§**: å¤šç§è®¢é˜…è®¡åˆ’ã€æ”¯ä»˜é›†æˆã€ä½¿ç”¨é‡è·Ÿè¸ª

### æ•°æ®æµæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Request   â”‚â”€â”€â”€â–¶â”‚   Gateway   â”‚â”€â”€â”€â–¶â”‚   Service   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                   â”‚
                           â–¼                   â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚    Cache    â”‚    â”‚  Database   â”‚
                   â”‚   (Redis)   â”‚    â”‚  (MySQL)    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                   â”‚
                           â–¼                   â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   Events    â”‚    â”‚   Metrics   â”‚
                   â”‚  (Kafka)    â”‚    â”‚ (InfluxDB)  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | ç”¨é€” |
|------|----------|------|
| **æ¡†æ¶** | Node-Universe (Moleculer) | å¾®æœåŠ¡æ¡†æ¶ |
| **è¯­è¨€** | TypeScript | å¼€å‘è¯­è¨€ |
| **æ•°æ®åº“** | MySQL 8.0+ | ä¸»æ•°æ®åº“ |
| **æ—¶åºæ•°æ®åº“** | InfluxDB | æŒ‡æ ‡æ•°æ®å­˜å‚¨ |
| **ç¼“å­˜** | Redis 6.0+ | åˆ†å¸ƒå¼ç¼“å­˜ |
| **æ¶ˆæ¯é˜Ÿåˆ—** | Apache Kafka | äº‹ä»¶æµå¤„ç† |
| **ç›‘æ§** | Prometheus + Grafana | ç³»ç»Ÿç›‘æ§ |
| **æ—¥å¿—** | Pino | ç»“æ„åŒ–æ—¥å¿— |
| **å®¹å™¨åŒ–** | Docker + Docker Compose | éƒ¨ç½²ç®¡ç† |

## ğŸ“ æ ‡å‡†åŒ–ç›®å½•ç»“æ„

### é¡¹ç›®æ ¹ç›®å½•

```
darwin-app/
â”œâ”€â”€ .env.development          # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ .env.example             # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .eslintrc.js             # ESLint é…ç½®
â”œâ”€â”€ .prettierrc              # Prettier é…ç½®
â”œâ”€â”€ README.md                # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ package.json             # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ tsconfig.json            # TypeScript é…ç½®
â”œâ”€â”€ docker/                  # Docker ç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ Dockerfile           # åº”ç”¨é•œåƒæ„å»º
â”‚   â”œâ”€â”€ docker-compose.yml   # æœåŠ¡ç¼–æ’
â”‚   â””â”€â”€ start.sh             # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ ecosystem.config.js      # PM2 é…ç½®
â””â”€â”€ src/                     # æºä»£ç ç›®å½•
    â”œâ”€â”€ auth/                # è®¤è¯æœåŠ¡
    â”œâ”€â”€ gateway/             # ç½‘å…³æœåŠ¡
    â”œâ”€â”€ user/                # ç”¨æˆ·æœåŠ¡
    â”œâ”€â”€ metrics/             # æŒ‡æ ‡æœåŠ¡
    â”œâ”€â”€ subscription/        # è®¢é˜…æœåŠ¡
    â”œâ”€â”€ common/              # å…¬å…±æ¨¡å—
    â”œâ”€â”€ config/              # é…ç½®ç®¡ç†
    â”œâ”€â”€ db/                  # æ•°æ®åº“è¿æ¥
    â”œâ”€â”€ typings/             # ç±»å‹å®šä¹‰
    â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
```

### å¾®æœåŠ¡æ ‡å‡†ç»“æ„

æ¯ä¸ªå¾®æœåŠ¡éƒ½éµå¾ªç»Ÿä¸€çš„ç›®å½•ç»“æ„ï¼Œç¡®ä¿ä»£ç çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§ï¼š

```
service-name/
â”œâ”€â”€ index.ts                 # æœåŠ¡ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ constants/               # é…ç½®å¸¸é‡
â”‚   â””â”€â”€ index.ts            # å¯¼å‡ºæ‰€æœ‰å¸¸é‡
â”œâ”€â”€ types/                   # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts            # å¯¼å‡ºæ‰€æœ‰ç±»å‹
â”œâ”€â”€ utils/                   # å·¥å…·ç±»å’Œå¤„ç†å™¨
â”‚   â”œâ”€â”€ index.ts            # å·¥å…·ç±»å¯¼å‡º
â”‚   â”œâ”€â”€ service-utils.ts    # æœåŠ¡å·¥å…·ç±»
â”‚   â”œâ”€â”€ cache-handler.ts    # ç¼“å­˜å¤„ç†å™¨
â”‚   â”œâ”€â”€ event-handler.ts    # äº‹ä»¶å¤„ç†å™¨
â”‚   â”œâ”€â”€ validation-handler.ts # éªŒè¯å¤„ç†å™¨
â”‚   â””â”€â”€ stats-collector.ts  # ç»Ÿè®¡æ”¶é›†å™¨
â”œâ”€â”€ actions/                 # API åŠ¨ä½œå¤„ç†
â”‚   â”œâ”€â”€ index.ts            # åŠ¨ä½œå¯¼å‡º
â”‚   â”œâ”€â”€ create.ts           # åˆ›å»ºæ“ä½œ
â”‚   â”œâ”€â”€ read.ts             # æŸ¥è¯¢æ“ä½œ
â”‚   â”œâ”€â”€ update.ts           # æ›´æ–°æ“ä½œ
â”‚   â””â”€â”€ delete.ts           # åˆ é™¤æ“ä½œ
â”œâ”€â”€ methods/                 # æœåŠ¡æ–¹æ³• (å¯é€‰)
â”‚   â””â”€â”€ index.ts            # æ–¹æ³•å¯¼å‡º
â””â”€â”€ events/                  # äº‹ä»¶å¤„ç† (å¯é€‰)
    â””â”€â”€ index.ts            # äº‹ä»¶å¯¼å‡º
```

### æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

#### 1. **index.ts (æœåŠ¡ä¸»æ–‡ä»¶)**
```typescript
// æ ‡å‡†ç»“æ„åŒ…å«:
- å¯¼å…¥ä¾èµ–å’Œå·¥å…·ç±»
- å…¨å±€çŠ¶æ€ç®¡ç†
- æœåŠ¡åˆå§‹åŒ–å‡½æ•°
- ç”Ÿå‘½å‘¨æœŸé’©å­ (created, started, stopped)
- äº‹ä»¶å¤„ç†æ–¹æ³•
- Star å®ä¾‹é…ç½®
```

#### 2. **constants/index.ts (é…ç½®å¸¸é‡)**
```typescript
// åŒ…å«:
- åº”ç”¨é…ç½® (APP_NAME, VERSION)
- æ•°æ®åº“é…ç½® (DB_CONFIG)
- Redisé…ç½® (REDIS_CONFIG)
- Kafkaé…ç½® (KAFKA_CONFIG)
- ä¸šåŠ¡é…ç½® (å…·ä½“ä¸šåŠ¡ç›¸å…³å¸¸é‡)
- ç›‘æ§é…ç½® (MONITORING_CONFIG)
```

#### 3. **types/index.ts (ç±»å‹å®šä¹‰)**
```typescript
// åŒ…å«:
- æœåŠ¡çŠ¶æ€æ¥å£ (ServiceState)
- ä¸šåŠ¡æ•°æ®æ¥å£ (å…·ä½“ä¸šåŠ¡å®ä½“)
- è¯·æ±‚å‚æ•°æ¥å£ (RequestParams)
- å“åº”æ•°æ®æ¥å£ (ResponseData)
- äº‹ä»¶æ•°æ®æ¥å£ (EventData)
- é…ç½®æ¥å£ (Config)
```

#### 4. **utils/ (å·¥å…·ç±»ç›®å½•)**
- **service-utils.ts**: æ ¸å¿ƒä¸šåŠ¡å·¥å…·ç±»
- **cache-handler.ts**: ç¼“å­˜ç®¡ç†å’Œæ“ä½œ
- **event-handler.ts**: äº‹ä»¶å‘å¸ƒå’Œå¤„ç†
- **validation-handler.ts**: æ•°æ®éªŒè¯å’Œæ¸…ç†
- **stats-collector.ts**: ç»Ÿè®¡æ•°æ®æ”¶é›†

#### 5. **actions/ (APIåŠ¨ä½œç›®å½•)**
- æ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªæˆ–ä¸€ç»„ç›¸å…³çš„APIæ“ä½œ
- ç»Ÿä¸€çš„å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†
- æ ‡å‡†çš„å“åº”æ ¼å¼

### ç¼–ç è§„èŒƒ

#### 1. **å‘½åè§„èŒƒ**
- **æ–‡ä»¶å**: kebab-case (ä¾‹: `user-utils.ts`)
- **ç±»å**: PascalCase (ä¾‹: `UserUtils`)
- **å‡½æ•°å**: camelCase (ä¾‹: `getUserInfo`)
- **å¸¸é‡å**: UPPER_SNAKE_CASE (ä¾‹: `MAX_RETRY_COUNT`)
- **æ¥å£å**: PascalCase (ä¾‹: `UserInfo`)

#### 2. **å¯¼å…¥é¡ºåº**
```typescript
// 1. Node.js å†…ç½®æ¨¡å—
// 2. ç¬¬ä¸‰æ–¹åº“
// 3. æ¡†æ¶ç›¸å…³ (Node-Universe)
// 4. é¡¹ç›®å†…éƒ¨æ¨¡å— (æŒ‰å±‚çº§é¡ºåº)
// 5. ç›¸å¯¹è·¯å¾„å¯¼å…¥
```

#### 3. **é”™è¯¯å¤„ç†**
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- ç»“æ„åŒ–çš„é”™è¯¯æ—¥å¿—
- é€‚å½“çš„é”™è¯¯ç å’Œæ¶ˆæ¯

#### 4. **æ—¥å¿—è§„èŒƒ**
- ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿— (Pino)
- ç»Ÿä¸€çš„æ—¥å¿—çº§åˆ« (debug, info, warn, error)
- åŒ…å«å¿…è¦çš„ä¸Šä¸‹æ–‡ä¿¡æ¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 16.0+
- Docker & Docker Compose
- MySQL 8.0+
- Redis 6.0+
- Apache Kafka 2.8+

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…é¡¹ç›®ä¾èµ–
npm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

### å¯åŠ¨åŸºç¡€æœåŠ¡

```bash
# å¯åŠ¨ Docker æœåŠ¡ (MySQL, Redis, Kafka, InfluxDB)
docker-compose up -d

# ç­‰å¾…æœåŠ¡å¯åŠ¨å®Œæˆ
docker-compose ps
```

### å¯åŠ¨å¾®æœåŠ¡

**é‡è¦**: è¯·æŒ‰ä»¥ä¸‹é¡ºåºå¯åŠ¨æœåŠ¡

```bash
# 1. é¦–å…ˆå¯åŠ¨ç½‘å…³æœåŠ¡
npm run start:gateway

# 2. å¯åŠ¨è®¤è¯æœåŠ¡
npm run start:auth

# 3. å¯åŠ¨ç”¨æˆ·æœåŠ¡
npm run start:user

# 4. å¯åŠ¨æŒ‡æ ‡æœåŠ¡
npm run start:metrics

# 5. å¯åŠ¨è®¢é˜…æœåŠ¡
npm run start:subscription
```

### å¼€å‘æ¨¡å¼

```bash
# å¼€å‘æ¨¡å¼å¯åŠ¨ (æ”¯æŒçƒ­é‡è½½)
npm run dev:gateway
npm run dev:auth
npm run dev:user
npm run dev:metrics
npm run dev:subscription
```

### æœåŠ¡ç«¯å£

| æœåŠ¡ | ç«¯å£ | æè¿° |
|------|------|------|
| Gateway | 3000 | API ç½‘å…³ |
| Auth | 3001 | è®¤è¯æœåŠ¡ |
| User | 3002 | ç”¨æˆ·æœåŠ¡ |
| Metrics | 3003 | æŒ‡æ ‡æœåŠ¡ |
| Subscription | 3004 | è®¢é˜…æœåŠ¡ |
| MySQL | 3306 | æ•°æ®åº“ |
| Redis | 6379 | ç¼“å­˜ |
| Kafka | 9092 | æ¶ˆæ¯é˜Ÿåˆ— |
| InfluxDB | 8086 | æ—¶åºæ•°æ®åº“ |

## ğŸ“Š ç›‘æ§å’Œè¿ç»´

### å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
curl http://localhost:3000/api/health

# æ£€æŸ¥ç‰¹å®šæœåŠ¡
curl http://localhost:3000/api/auth/v1/health
curl http://localhost:3000/api/user/v1/health
curl http://localhost:3000/api/metrics/v1/health
curl http://localhost:3000/api/subscription/v1/health
```

### ç›‘æ§æŒ‡æ ‡

```bash
# Prometheus æŒ‡æ ‡
curl http://localhost:3000/metrics

# æœåŠ¡æŒ‡æ ‡
curl http://localhost:3001/metrics  # Auth
curl http://localhost:3002/metrics  # User
curl http://localhost:3003/metrics  # Metrics
curl http://localhost:3004/metrics  # Subscription
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs -f gateway
docker-compose logs -f auth
docker-compose logs -f user
docker-compose logs -f metrics
docker-compose logs -f subscription
```

## ğŸ”§ é…ç½®ç®¡ç†

### ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` åˆ° `.env.development` å¹¶æ ¹æ®å®é™…ç¯å¢ƒä¿®æ”¹é…ç½®ï¼š

```bash
cp .env.example .env.development
```

ä¸»è¦é…ç½®é¡¹ï¼š

```bash
# æ•°æ®åº“é…ç½®
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=password
MYSQL_DATABASE=darwin_app

# Redis é…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Kafka é…ç½®
KAFKA_BROKERS=localhost:9092

# InfluxDB é…ç½®
INFLUXDB_URL=http://localhost:8086
INFLUXDB_TOKEN=your-token
INFLUXDB_ORG=darwin-app
INFLUXDB_BUCKET=metrics

# JWT é…ç½®
JWT_SECRET=your-secret-key
JWT_EXPIRES_IN=7d

# æ”¯ä»˜é…ç½®
ALIPAY_APP_ID=your-alipay-app-id
WECHAT_APP_ID=your-wechat-app-id
```

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
npm test

# è¿è¡Œé›†æˆæµ‹è¯•
npm run test:integration

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e

# æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage
```

## ğŸ“¦ éƒ¨ç½²

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t darwin-app .

# è¿è¡Œå®¹å™¨
docker run -d -p 3000:3000 darwin-app
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# ä½¿ç”¨ PM2 éƒ¨ç½²
npm run build
pm2 start ecosystem.config.js

# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
pm2 status
pm2 logs
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ç»´æŠ¤è€…: Darwin
- é‚®ç®±: mecci1999@163.com
<!-- - æ–‡æ¡£: [https://docs.darwin-app.com](https://docs.darwin-app.com) -->

---

**æ³¨æ„**: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²å‰ï¼Œè¯·ç¡®ä¿æ‰€æœ‰æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚æ•°æ®åº“å¯†ç ã€APIå¯†é’¥ç­‰ï¼‰éƒ½å·²æ­£ç¡®é…ç½®ï¼Œå¹¶éµå¾ªå®‰å…¨æœ€ä½³å®è·µã€‚